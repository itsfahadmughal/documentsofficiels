!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Apm=t():(e.FreedomPay=e.FreedomPay||{},e.FreedomPay.Apm=t())}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=25)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(){function e(){}return e.addEventListenerToTop=function(e,t){this.removeEventListenerFromTop(e,t),window.top.document.addEventListener(e,t,!1)},e.bindEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},e.bindMessageEvent=function(e,t){this.bindEvent(e,"message",t)},e.createElement=function(e){return this.getDocument().createElement(e)},e.dispatchEventToTop=function(e){window.top.document.dispatchEvent(e)},e.getAppVersion=function(){var e=this.getElementsByTagName("html")[0];return e?e.getAttribute("app-version"):""},e.getDocument=function(){return window.document},e.getElementsByClass=function(e){return this.getDocument().getElementsByClassName(e)},e.getElementById=function(e){return this.getDocument().getElementById(e)},e.getElementsByTagName=function(e,t){return void 0===t&&(t=null),null===t&&(t=this.getDocument()),t.getElementsByTagName(e)},e.getHost=function(){return this.getHostAnchor().host},e.getHostOrigin=function(){var e=this.getHostAnchor(),t=e.origin?e.origin:e.protocol+"//"+e.host;return t===window.location.origin&&o.Utilities.isNullOrEmpty(this.getReferrer())&&(t="*"),t},e.getQueryString=function(e){return"?"+Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")},e.getSessionKeyFromUrl=function(t){return void 0===t&&(t=null),e.getUrlParameter("sessionKey",t)},e.getUrlParameter=function(e,t){void 0===t&&(t=null),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=t;null==t&&(n=window.location.search);var o=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))},e.logDebugMessageToConsole=function(e){window.console&&this.isDebug()&&window.console.log(e)},e.logToConsole=function(e){window.console&&window.console.log(e)},e.removeEventListener=function(e,t){e.removeEventListener("message",t)},e.removeEventListenerFromTop=function(e,t){window.top.document.removeEventListener(e,t,!1)},e.sendHostMessage=function(t,n){var o=n?n.hostOrigin:e.getHostOrigin();window.parent.postMessage(t,o)},e.sendPostMessageToTop=function(t,n){var i=e.getHostOrigin();o.Utilities.isNullOrUndefined(n)||o.Utilities.isNullOrEmpty(n.hostOrigin)||(i=n.hostOrigin),this.logDebugMessageToConsole("sendPostMessageToTop"),this.logDebugMessageToConsole(t),window.top.postMessage(t,i)},e.sendPostMessageToIframe=function(e,t){var n=t.href;this.logDebugMessageToConsole("sendPostMessageToIframe for "+n),this.logDebugMessageToConsole(e),this.logDebugMessageToConsole(t);var i=this.findIframeBySourceUrl(n,this.getDocument());o.Utilities.isNullOrUndefined(i)&&this.logToConsole("Could not find iframe for "+n),i.contentWindow.postMessage(e,t.host)},e.sendPostMessage=function(e){var t=window.location.href,n=window.location.origin;this.logDebugMessageToConsole("sendPostMessageToIframe for "+t),this.logDebugMessageToConsole(e),window.postMessage(e,n)},e.findIframeBySourceUrl=function(e,t){var n=null;if(null!==t)for(var o=t.getElementsByTagName("iframe"),i=o.length,r=0;r<i;r++){var s=o[r];if(s.src===e){n=s;break}if(null!==(n=this.findIframeBySourceUrl(e,s.contentDocument)))return n}return n},e.getReferrer=function(){var e=window.settings;return e&&!o.Utilities.isNullOrEmpty(e.Referrer)?e.Referrer:this.getDocument().referrer},e.getHostAnchor=function(){var e=this.createElement("a");return e.href=this.getReferrer(),e},e.isDebug=function(e){return void 0===e&&(e=window.location.href),this.debugHostOriginRegex.test(e)},e.debugHostOriginRegex=/(hpc(\S+|\.)(qa|dev|uat)\.freedompay\.com)|localhost\:\d+|(freedompay\.championsdev\.com)|(test1\.readydemo\.co)/,e}();t.WindowHelper=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(8),r=n(4),s=n(0),a=function(){function e(){}return e.isNullOrUndefined=function(e){return null==e},e.isNullOrEmpty=function(e){return!!this.isNullOrUndefined(e)||0===e.length},e.getCardinalCentinelSessionIdElement=function(){return s.WindowHelper.getElementById(r.Constants.cardinalSessionIdElementId)},e.poll=function(e){var t=e.validate,n=e.interval,i=e.maxAttempts,r=0,s=function(e,o){return r++,t()?e():i&&r===i?o(new Error("Exceeded max attempts")):void setTimeout(s,n,e,o)};return new o(s)},e.getElementBySelector=function(e,t){void 0===t&&(t=!1);var n=document.querySelector(e);if(this.isNullOrUndefined(n)&&t)throw this.formatString(i.Messages.elementNotFound,e);return n},e.getBodyElement=function(){return window.document.getElementsByTagName("body")[0]},e.formatString=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/{(\d+)}/g,(function(e,n){return t[n]||""}))},e.validateCardNumber=function(e){if(/[^0-9-\s]+/.test(e))return!1;for(var t,n=0,o=!1,i=(e=e.replace(/\D/g,"")).length-1;i>=0;i--){var r=e.charAt(i);t=parseInt(r,10),o&&(t*=2)>9&&(t-=9),n+=t,o=!o}return n%10==0},e.setElementValue=function(e,t){var n=s.WindowHelper.getElementById(e);if(this.isNullOrUndefined(n))throw"Element with ID "+e+" was not found";n.value=t},e.isCardinalSetup=function(){var e=this.getCardinalCentinelSessionIdElement();return!this.isNullOrUndefined(e)&&!this.isNullOrEmpty(e.value)},e.isFunction=function(e){return!this.isNullOrUndefined(e)&&"function"==typeof e},e.hasDisabledClass=function(e){return e.className.indexOf(r.Constants.disabledClassName)>-1},e.setCookie=function(e,t,n){document.cookie=e+"="+t+"; expires="+new Date(n)+"; path=/"},e.getCookie=function(e){var t=("; "+document.cookie).split("; "+e+"=");return 2==t.length?t.pop().split(";").shift():null},e.deleteCookie=function(e){var t=new Date;t.setTime(t.getTime()+-864e5),document.cookie=e+"=; expires="+t.toUTCString()+"; path=/"},e}();t.Utilities=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.ReceiveErrors=1]="ReceiveErrors",e[e.ReceiveFrameHeight=2]="ReceiveFrameHeight",e[e.ReceivePaymentKey=3]="ReceivePaymentKey",e[e.ReceiveValidityChange=4]="ReceiveValidityChange",e[e.SendApplePayIsSupported=5]="SendApplePayIsSupported",e[e.ReceiveApplePayIsSupported=6]="ReceiveApplePayIsSupported",e[e.SendApplePayClick=8]="SendApplePayClick",e[e.SendSetupApplePayHelper=9]="SendSetupApplePayHelper",e[e.SendSetupCardinalHelper=10]="SendSetupCardinalHelper",e[e.SendInvokeCardinal=11]="SendInvokeCardinal",e[e.SendCardinalApprove=12]="SendCardinalApprove",e[e.SendSetCardinalSessionId=13]="SendSetCardinalSessionId",e[e.SendCardinalErrors=14]="SendCardinalErrors",e[e.ReceiveLegalClick=15]="ReceiveLegalClick",e[e.ReceiveConsumerAuthData=16]="ReceiveConsumerAuthData",e[e.InvokeConsumerAuth=17]="InvokeConsumerAuth",e[e.SendSetupPayByBank=18]="SendSetupPayByBank",e[e.SendInvokePayByBank=19]="SendInvokePayByBank",e[e.SendPayByBankClick=20]="SendPayByBankClick"}(t.EventType||(t.EventType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n){this.type=e,this.data=t,this.messageCode=n};t.Message=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.cardinalEmittedBy="3d secure",e.cardinalFailedAuthCode="N",e.cardinalSessionIdElementId="CCSessionId",e.cardinalSuccessfulErrorMessage="Success",e.cardinalProfileCompleted="profile.completed",e.masterCardEmittedBy="MasterCard - 3d secure",e.consumerAuthUnavailableError="Consumer Authentication Not Available.",e.consumerAuthCanceled="Consumer Authentication Canceled",e.consumerAuthGenericError="Consumer Authentication Failed.",e.consumerAuthInvalidDataError="Consumer Authentication Invalid Data.",e.disabledClassName="disabled",e.openBankingEmittedBy="Open Banking",e.payByBankCookieKey="fp_paybybank_sessionid",e.authenticateResponseAttributeKey="AuthenticateResponse",e}();t.Constants=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(14),i=function(e,t,n,i,r){void 0===i&&(i=o.ErrorType.Error),void 0===r&&(r=null),this.emittedBy=e,this.message=t,this.messageCode=n,this.errorType=i,this.data=r};t.Error=i},function(e,t,n){(function(t){!function(){"use strict";var n,o,i="object"==typeof self,r=i?self:t,s=r.Promise,a=r.process,u=Array,l={e:null},c=function(){},d=r.Symbol||{},p=i?function(e){s?new s((function(e){e()})).then(e):setTimeout(e)}:a.nextTick,f=function(e){var t;if(!g(this)||void 0!==this._s)throw w("Invalid this");if(this._s=2,e!==c){if(!m(e))throw w("Invalid argument");(t=C(e)(k(this,1),k(this,0)))===l&&A(this,0,t.e)}};function y(){return d.species||"Symbol(species)"}function g(e){return e&&"object"==typeof e}function m(e){return"function"==typeof e}function h(e,t,n){if(!t(e))throw w(n)}function v(){try{return n.apply(o,arguments)}catch(e){return l.e=e,l}}function C(e,t){return n=e,o=t,v}function P(e,t){var n=u(e),o=0;function i(){for(var i=0;i<o;)t(n[i],n[i+1]),n[i++]=void 0,n[i++]=void 0;o=0,n.length>e&&(n.length=e)}return function(e,t){n[o++]=e,n[o++]=t,2===o&&p(i)}}function b(e,t){var n,o,i,r,s=0;if(!e)throw w("Invalid argument");var a=e[d.iterator];if(m(a))o=a.call(e);else{if(!m(e.next)){if(e instanceof u){for(n=e.length;s<n;)t(e[s],s++);return s}throw w("Invalid argument")}o=e}for(;!(i=o.next()).done;)if((r=C(t)(i.value,s++))===l)throw m(o.return)&&o.return(),r.e;return s}function w(e){return new TypeError(e)}f.default=f,function(e,t){for(var n in t)e.prototype[n]=t[n]}(f,{then:function(e,t){if(void 0===this._s)throw w();return function(e,t,n,o){m(n)&&(t._onFulfilled=n);m(o)&&(e._uh&&M("rejectionHandled",e),t._onRejected=o);e[e._pCount++]=t,2!==e._s&&T(e,t);return t}(this,_((n=f,(o=this.constructor)&&o[y()]||n)),e,t);var n,o},catch:function(e){return this.then(void 0,e)},finally:function(e){return this.then((function(t){return f.resolve(e()).then((function(){return t}))}),(function(t){return f.resolve(e()).then((function(){throw t}))}))},_pCount:0,_pre:null,_Yaku:1}),f.resolve=function(e){return S(e)?e:B(_(this),e)},f.reject=function(e){return A(_(this),0,e)},f.race=function(e){var t=this,n=_(t),o=function(e){A(n,1,e)},i=function(e){A(n,0,e)},r=C(b)(e,(function(e){t.resolve(e).then(o,i)}));return r===l?t.reject(r.e):n},f.all=function(e){var t,n=this,o=_(n),i=[];function r(e){A(o,0,e)}return(t=C(b)(e,(function(e,s){n.resolve(e).then((function(e){i[s]=e,--t||A(o,1,i)}),r)})))===l?n.reject(t.e):(t||A(o,1,[]),o)},C((function(){Object.defineProperty(f,y(),{get:function(){return this}})}))(),f._Yaku=1;var T=P(999,(function(e,t){var n,o;void 0!==(o=e._s?t._onFulfilled:t._onRejected)?(n=C(H)(o,e._v))!==l?B(t,n):A(t,0,n.e):A(t,e._s,e._v)})),E=P(9,(function(e){(function e(t){if(t._umark)return!0;t._umark=!0;var n,o=0,i=t._pCount;for(;o<i;)if((n=t[o++])._onRejected||e(n))return!0})(e)||(e._uh=1,M("unhandledRejection",e))}));function M(e,t){var n="on"+e.toLowerCase(),o=r[n];a&&a.listeners(e).length?"unhandledRejection"===e?a.emit(e,t._v,t):a.emit(e,t):o&&o({reason:t._v,promise:t})}function S(e){return e&&e._Yaku}function _(e){return S(e)?new e(c):(t=new e((function(e,i){if(t)throw w();n=e,o=i})),h(n,m),h(o,m),t);var t,n,o}function k(e,t){var n=!1;return function(o){n||(n=!0,1===t?B(e,o):A(e,t,o))}}function H(e,t){return e(t)}function A(e,t,n){var o=0,i=e._pCount;if(2===e._s)for(e._s=t,e._v=n,0===t&&E(e);o<i;)T(e,e[o++]);return e}function B(e,t){if(t===e&&t)return A(e,0,w("Chaining cycle detected for promise")),e;if(null!==t&&(m(t)||g(t))){var n=C(O)(t);if(n===l)return A(e,0,n.e),e;m(n)?S(t)?I(e,t,n):p((function(){I(e,t,n)})):A(e,1,t)}else A(e,1,t);return e}function O(e){return e.then}function I(e,t,n){var o=C(n,t)((function(n){t&&(t=null,B(e,n))}),(function(n){t&&(t=null,A(e,0,n))}));o===l&&t&&(A(e,0,o.e),t=null)}try{e.exports=f}catch(e){r.Yaku=f}}()}).call(this,n(12))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.applePayBrowserNotSupported="applePayBrowserNotSupported",e.applePayHelperCancel="applePayHelperCancel",e.applePayHelperCouldNotStartSession="applePayHelperCouldNotStartSession",e.applePayHelperNotInitialized="applePayHelperNotInitialized",e.applePayHelperSetUpSession="applePayHelperSetUpSession",e.applePayHelperUnableToCompletePayment="applePayHelperUnableToCompletePayment",e.applePayNoActiveCards="applePayNoActiveCards",e.browserOutOfDate="browserOutOfDate",e.consumerAuthFailure="consumerAuthFailure",e.consumerAuthCanceled="consumerAuthCanceled",e.hpcInitError="hpcInitError",e.invalidTypeText="invalidTypeText",e.maximumPaymentKeyAttempts="maximumPaymentKeyAttempts",e.networkErrorText="networkErrorText",e.openBankingConfigFailed="openBankingConfigurationFailure",e.paymentKeyExpiredText="paymentKeyExpiredText",e.paymentTypeInvalid="paymentTypeInvalid",e.posDataInvalidText="posDataInvalidText",e.incompleteCardNumber="incompleteCardNumber",e.incompleteExpirationDate="incompleteExpirationDate",e.incompletePostalCode="incompletePostalCode",e.incompleteSecurityCode="incompleteSecurityCode",e.invalidCardNumber="invalidCardNumber",e.invalidExpirationDate="invalidExpiration",e.invalidPostalCode="invalidPostalCode",e.invalidSecurityCode="invalidSecurityCode",e.requiredLegal="requiredLegal",e.resourceNotFound="resourceNotFound",e.resourceUnauthorized="resourceUnauthorized",e.sessionKeyInvalidText="sessionKeyInvalidText",e.sessionKeyNotFound="sessionKeyNotFound",e.storeConfigMissingGiftCardOptions="storeConfigMissingGiftCardOptions",e.storeNotConfiguredForGiftCards="storeNotConfiguredForGiftCards",e.storeNotConfiguredForPrivateLabelCards="storeNotConfiguredForPrivateLabelCards",e.unableToGeneratePaymentKeyText="unableToGeneratePaymentKeyText",e.unableToGenerateSeedText="unableToGenerateSeedText",e.unableToGetStoreConfig="unableToGetStoreConfig",e.unableToGetStoreConfigMissingStoreIdOrTerminalId="unableToGetStoreConfigMissingStoreIdOrTerminalId",e.unableToGetStoreInfo="unableToGetStoreInfo",e.unableToLoadControlsText="unableToLoadControlsText",e.unableToProcessAcknowledgeText="unableToProcessAcknowledgeText",e.unableToProcessPaymentText="unableToProcessPaymentText",e.unableToProcessRequestText="unableToProcessRequestText",e.unableToProcessReversalText="unableToProcessReversalText",e.unknownError="unknownError",e}();t.MessageCodes=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.applePayHelperNotInitialized="Apple Pay helper is not initialized",e.sessionKeyNotFoundInUrl="No session key was found in the url",e.valueNotProvided="The parameter {0} was not provided and is required.",e.elementNotFound="No element was found matching selector {0}.",e}();t.Messages=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.apmCreateOrderPayPal="/apm/create-order/paypal",e.apmCreateOrderPayByBank="/apm/create-session/pay-by-bank",e.apmFinalizeSession="/apm/finalize-session/pay-by-bank",e.entropy="/controls/entropy",e.paymentKey="/payments/key",e.dccCustomerDecision="/payments/dcc/decision",e.dccRate="/payments/dcc/rate",e}();t.Endpoint=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(20),r=n(21),s=n(0),a=function(){function e(){}return e.delete=function(e,t){var n=new i.HttpRequestSettings;return n.method=r.HttpVerb.Delete,n.url=e,n.headers=t,this.request(n)},e.get=function(e,t){var n=new i.HttpRequestSettings;return n.method=r.HttpVerb.Get,n.url=e,n.headers=t,this.request(n)},e.post=function(e,t,n){var o=new i.HttpRequestSettings;return o.method=r.HttpVerb.Post,o.url=e,o.data=t,o.headers=n,this.request(o)},e.put=function(e,t,n){var o=new i.HttpRequestSettings;return o.method=r.HttpVerb.Put,o.url=e,o.data=t,o.headers=n,this.request(o)},e.request=function(e){return new o((function(t,n){var o=new XMLHttpRequest;if(o.open(e.method,e.url,e.async,e.username,e.password),e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.headers&&Object.keys(e.headers).forEach((function(t){return o.setRequestHeader(t,e.headers[t])})),!e.headers||!e.headers.Authorization){var i=s.WindowHelper.getSessionKeyFromUrl();i&&o.setRequestHeader("Authorization","Bearer "+i)}o.onload=function(){200===o.status?t({response:o.response,statusText:o.statusText,xhr:o}):n({errors:o.response,status:o.status,statusText:o.statusText,xhr:o})},o.onerror=function(){n({errors:o.response,status:o.status,statusText:o.statusText,xhr:o})},e.method===r.HttpVerb.Post||e.method===r.HttpVerb.Put?(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(e.data))):o.send()}))},e}();t.HttpClient=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),i=n(2),r=n(3),s=n(7),a=n(0),u=function(){function e(){}return e.sendErrors=function(e,t){var n=new r.Message(i.EventType.ReceiveErrors,{errors:e});a.WindowHelper.sendHostMessage(n,t)},e.sendFrameHeight=function(e,t){a.WindowHelper.logDebugMessageToConsole("sendFrameHeight: "+e),setTimeout((function(){var n=new r.Message(i.EventType.ReceiveFrameHeight,{height:e});a.WindowHelper.sendHostMessage(n,t)}),100)},e.sendInitError=function(e){var t=this.getMessageTranslation(s.MessageCodes.hpcInitError,"Controls did not load properly. Please refresh and try again.");this.sendErrors([new o.Error("Init",t,s.MessageCodes.hpcInitError)],e)},e.getMessageTranslation=function(e,t){if(void 0===window.hpc)return t;var n=window.hpc.messages[""+e];return void 0!==n?n:t},e}();t.MessageHelper=u},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.final="final",e.pending="pending"}(t.ApplePayLineItemType||(t.ApplePayLineItemType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning"}(t.ErrorType||(t.ErrorType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n,o){void 0===o&&(o=null),this.attributes=e,this.cardData=t,this.paymentType=n,this.postalCode=o};t.Card=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.Card=1]="Card",e[e.CardOnFile=2]="CardOnFile",e[e.GiftCard=3]="GiftCard",e[e.RewardCard=4]="RewardCard",e[e.GooglePay=5]="GooglePay",e[e.ApplePay=6]="ApplePay",e[e.PrivateLabelCard=7]="PrivateLabelCard",e[e.PayPal=8]="PayPal",e[e.PayByBank=9]="PayByBank"}(t.PaymentType||(t.PaymentType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(3),r=n(2),s=n(18),a=n(19),u=n(13),l=function(){function e(){}return e.init=function(){o.WindowHelper.bindMessageEvent(window,(function(t){e.setupApplePayHelper(t),e.canInitializeApplePay(t)}))},e.isSupported=function(){return null!==this.getApplePaySession()},e.setupApplePayHelper=function(e){o.WindowHelper.logDebugMessageToConsole("ApplePay.setupApplePayHelper"),o.WindowHelper.logDebugMessageToConsole(e),e.data.type===r.EventType.SendSetupApplePayHelper&&a.ApplePayHelper.init(e.data.data.environment,e.data.data.initRequest)},e.adjustTotal=function(e){this.adjustTotalWithLineItems({amount:e,label:"Total",type:u.ApplePayLineItemType.final})},e.adjustTotalWithLineItems=function(e,t){void 0===t&&(t=[]),a.ApplePayHelper.adjustTotal(e,this.getApplePaySession(),t)},e.initialize=function(e){a.ApplePayHelper.setPaymentRequest(e)},e.canMakePayments=function(){var t=e.isSupported(),n=this.getApplePaySession();return t&&n.canMakePayments()&&n.supportsVersion(a.ApplePayHelper.applePayJsApiVersion)},e.paymentSuccessful=function(){var e=this.getApplePaySession();a.ApplePayHelper.completePayment(e.STATUS_SUCCESS)},e.paymentFailed=function(){var e=this.getApplePaySession();a.ApplePayHelper.completePayment(e.STATUS_FAILURE)},e.canInitializeApplePay=function(t){if(o.WindowHelper.logDebugMessageToConsole("canInitializeApplePay"),o.WindowHelper.logDebugMessageToConsole(t),t.data.type===r.EventType.SendApplePayIsSupported){var n=e.isSupported(),u=e.canMakePayments(),l=t.data.data;n&&u&&o.WindowHelper.bindMessageEvent(window,a.ApplePayHelper.onClick);var c=new s.ApplePayParameters;c.supported=n,c.canMakePayments=u,o.WindowHelper.sendPostMessageToIframe(new i.Message(r.EventType.ReceiveApplePayIsSupported,c),l)}},e.getApplePaySession=function(){var e=window.top;return"ApplePaySession"in e?e.ApplePaySession:null},e}();t.ApplePay=l,l.init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){this.supported=!1,this.canMakePayments=!1};t.ApplePayParameters=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(13),r=n(15),s=n(9),a=n(2),u=n(10),l=n(5),c=n(3),d=n(7),p=n(11),f=n(8),y=n(16),g=n(0),m=n(1),h=function(){function e(){}return e.init=function(e,t){this.environment=e,this.setup(t),this.isInitialized=!0,this.autoFinalizePayment=t.autoFinalizePayment},e.setPaymentRequest=function(e){this.paymentRequest=e},e.onClick=function(t){if(g.WindowHelper.logDebugMessageToConsole("ApplePay.onClick"),g.WindowHelper.logDebugMessageToConsole(t),t.data.type===a.EventType.SendApplePayClick){e.assertInitialized();var n=e.paymentRequest;g.WindowHelper.logDebugMessageToConsole(n);var o=t.data.data,i=g.WindowHelper.getSessionKeyFromUrl(o);if(null===i)throw f.Messages.sessionKeyNotFoundInUrl+": "+o;var r=new window.top.ApplePaySession(e.applePayJsApiVersion,n);e.setUpSession(r,i)}},e.adjustTotal=function(t,n,o){void 0===o&&(o=[]),e.session=n,e.paymentRequest.total=t,e.paymentRequest.lineItems=o,e.session.onpaymentmethodselected=function(){e.session.completePaymentMethodSelection({newTotal:t,newLineItems:o})},e.session.onshippingcontactselected=function(){e.session.completeShippingContactSelection({newTotal:t,newLineItems:o})},e.session.onshippingmethodselected=function(){e.session.completeShippingMethodSelection({newTotal:t,newLineItems:o})}},e.abortSession=function(){e.session.abort(),e.isActive=!1},e.setUpSession=function(t,n){g.WindowHelper.logDebugMessageToConsole("ApplePayHelper.setUpSession"),g.WindowHelper.logDebugMessageToConsole(t),e.assertInitialized(),e.sessionKey=n,e.session=t,e.session.oncancel=function(){e.showError(["Your request has been cancelled"],d.MessageCodes.applePayHelperCancel)},e.session.onvalidatemerchant=function(t){e.validate(t.validationURL).then((function(t){g.WindowHelper.logDebugMessageToConsole("ApplePayHelper.session.onvalidatemerchant"),g.WindowHelper.logDebugMessageToConsole(t),e.session.completeMerchantValidation(t)})).catch((function(t){e.showError(["Could not start an apple pay session",t],d.MessageCodes.applePayHelperSetUpSession),e.abortSession()}))},this.adjustTotal(e.paymentRequest.total,e.session,e.paymentRequest.lineItems),e.session.onpaymentauthorized=function(t){g.WindowHelper.logDebugMessageToConsole("ApplePayHelper.session.onpaymentauthorized"),g.WindowHelper.logDebugMessageToConsole(t);var n=new r.Card({cardIssuer:t.payment.token.paymentMethod.network,maskedCardNumber:t.payment.token.paymentMethod.displayName,paymentType:y.PaymentType.ApplePay,billingContact:JSON.stringify(t.payment.billingContact),shippingContact:JSON.stringify(t.payment.shippingContact)},JSON.stringify(t.payment.token.paymentData),y.PaymentType.ApplePay,m.Utilities.isNullOrUndefined(t.payment.billingContact)?null:t.payment.billingContact.postalCode);e.isActive&&(e.isActive=!1,e.onApplePayPayment(n))},e.isActive||(e.isActive=!0,e.session.begin())},e.completePayment=function(t){e.session.completePayment({status:t})},e.setup=function(e){g.WindowHelper.logDebugMessageToConsole("ApplePayHelper.setup"),g.WindowHelper.logDebugMessageToConsole(e);var t={label:"Total",amount:e.total,type:i.ApplePayLineItemType.final},n={merchantCapabilities:e.merchantCapabilities,supportedNetworks:e.supportedNetworks,countryCode:e.countryCode,requiredBillingContactFields:e.billingContactFields,requiredShippingContactFields:e.shippingContactFields,supportedCountries:[],total:t,lineItems:e.lineItems,currencyCode:e.currencyCode,shippingType:e.shippingType,shippingMethods:[]};this.setPaymentRequest(n),this.storeName=e.storeName,this.serviceBaseUrl=e.serviceBaseUrl},e.showError=function(t,n){if(void 0===n&&(n=null),e.isActive){e.isActive=!1;var o=[];t.forEach((function(e){if("string"==typeof e||"object"==typeof e)if("object"==typeof e){if("string"!=typeof e.errors)return;if(""==e.errors.trim())return;o.push(new l.Error("ApplePay",e.errors,n))}else{if(""==e.trim())return;o.push(new l.Error("ApplePay",e,n))}})),p.MessageHelper.sendErrors(o,this.environment)}},e.validate=function(t){var n={uri:t,context:window.location.host,storeName:e.storeName};return g.WindowHelper.logDebugMessageToConsole("ApplePayHelper.validate"),g.WindowHelper.logDebugMessageToConsole(n),e.sendPost(e.serviceBaseUrl+"/apm/validate/apple",n)},e.onApplePayPayment=function(t){var n=this;g.WindowHelper.logDebugMessageToConsole("onApplePayPayment"),g.WindowHelper.logDebugMessageToConsole(t),e.sendPost(e.serviceBaseUrl+s.Endpoint.paymentKey,t).then((function(t){var o=t.PaymentKey?{paymentKey:t.PaymentKey,paymentType:t.paymentType}:{attributes:t.Attributes,paymentKeys:t.PaymentKeys,paymentType:t.PaymentType};n.autoFinalizePayment?e.finalize(o):g.WindowHelper.sendPostMessageToTop(new c.Message(a.EventType.ReceivePaymentKey,o),n.environment)})).catch((function(t){e.showError(["Payment could not be completed right now",t],d.MessageCodes.applePayHelperUnableToCompletePayment),e.abortSession()}))},e.assertInitialized=function(){if(!e.isInitialized)throw f.Messages.applePayHelperNotInitialized},e.sendPost=function(t,n){var i={};return i.Authorization="Bearer "+e.sessionKey,new o((function(e,o){u.HttpClient.post(t,n,i).then((function(t){e(JSON.parse(t.response))})).catch((function(e){o(e)}))}))},e.finalize=function(t){if(null!==window){var n=window.top;t?(e.completePayment(n.ApplePaySession.STATUS_SUCCESS),g.WindowHelper.sendPostMessageToTop(new c.Message(a.EventType.ReceivePaymentKey,t),this.environment)):(e.completePayment(n.ApplePaySession.STATUS_FAILURE),g.WindowHelper.sendPostMessageToTop(new c.Message(a.EventType.ReceiveErrors,t),this.environment))}},e.applePayJsApiVersion=6,e}();t.ApplePayHelper=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this._async=!0}return Object.defineProperty(e.prototype,"async",{get:function(){return this._async},set:function(e){this._async=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this._headers},set:function(e){this._headers=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this._method},set:function(e){this._method=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mimeType",{get:function(){return this._mimeType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metmimeTypehod",{set:function(e){this._mimeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"password",{get:function(){return this._password},set:function(e){this._password=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"username",{get:function(){return this._username},set:function(e){this._username=e},enumerable:!0,configurable:!0}),e}();t.HttpRequestSettings=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Delete="DELETE",e.Get="GET",e.Post="POST",e.Put="PUT"}(t.HttpVerb||(t.HttpVerb={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=n(4),r=n(5),s=n(2),a=n(3),u=n(7),l=n(0),c=function(){function e(){}return e.init=function(){l.WindowHelper.bindMessageEvent(window,(function(t){e.handleEvent(t)}))},e.handleEvent=function(e){var t=e.data.type;t===s.EventType.SendSetupCardinalHelper?this.setupCardinalHelper(e.data.data):t===s.EventType.SendInvokeCardinal&&this.invokeCardinal(e.data.data)},e.setupCardinalHelper=function(e){l.WindowHelper.logDebugMessageToConsole("setupCardinalHelper"),l.WindowHelper.logDebugMessageToConsole(e);var t=window.top;this.initRequest=e.initRequest;var n=this.initRequest.songbirdUrl;if(null===n){l.WindowHelper.logDebugMessageToConsole("songBirdUrl is null");var u=[];return u.push(new r.Error(i.Constants.cardinalEmittedBy,"Invalid songbird url")),void l.WindowHelper.sendPostMessageToIframe(new a.Message(s.EventType.SendCardinalErrors,u),this.initRequest.locationData)}if(void 0===t.Cardinal){var c=document.createElement("script");c.type="text/javascript",c.src=n,t.document.body.appendChild(c)}void 0===t.Cardinal?this.waitForCardinal(this.initRequest,n,0,100,2500):o.CardinalHelper.setup(this.initRequest)},e.waitForCardinal=function(e,t,n,u,c){var d=this;if(n>=c){var p=[];return l.WindowHelper.logDebugMessageToConsole("Could not load songbird after "+n+" ms"),p.push(new r.Error(i.Constants.cardinalEmittedBy,i.Constants.consumerAuthUnavailableError)),void l.WindowHelper.sendPostMessageToIframe(new a.Message(s.EventType.SendCardinalErrors,p),this.initRequest.locationData)}var f=window.top;setTimeout((function(){void 0!==f.Cardinal?o.CardinalHelper.setup(d.initRequest):(l.WindowHelper.logDebugMessageToConsole("Checking for Cardinal"),d.waitForCardinal(e,t,n+u,u,c))}),u)},e.invokeCardinal=function(e){var t=e;if(null===t.CmpiLookup||!o.CardinalHelper.isCardinalSetUp()){var n=[];return n.push(new r.Error(i.Constants.cardinalEmittedBy,i.Constants.consumerAuthGenericError,u.MessageCodes.consumerAuthFailure)),void l.WindowHelper.sendPostMessageToIframe(new a.Message(s.EventType.SendCardinalErrors,n),this.initRequest.locationData)}o.CardinalHelper.invoke(t)},e}();t.Cardinal=c,c.init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),i=n(4),r=n(5),s=n(2),a=n(3),u=n(1),l=n(0),c=function(){function e(){}return e.invoke=function(e){this.processor=o.ConsumerAuthentication,this.processor.triggerBinMap(e.CmpiLookup.CardBin),this.processor.invokeCardinal(e)},e.setup=function(e){l.WindowHelper.logDebugMessageToConsole("CardinalHelper.setup"),l.WindowHelper.logDebugMessageToConsole(e),this.processor=o.ConsumerAuthentication,this.initializeProcessor(e)},e.isCardinalSetUp=function(){return!u.Utilities.isNullOrUndefined(o)&&!u.Utilities.isNullOrUndefined(o.ConsumerAuthentication)},e.initializeProcessor=function(e){l.WindowHelper.logDebugMessageToConsole("CardinalHelper.initializeProcessor"),l.WindowHelper.logDebugMessageToConsole(e);var t=window.top;this.processor.initialize({cardinal:t.Cardinal,currencyCode:e.currencyCode,jwtToken:e.cardinalCentinelJwt,maxFailureAttempts:e.maxFailureAttempts,errorCallback:function(t){var n=[];n.push(new r.Error(i.Constants.cardinalEmittedBy,t)),l.WindowHelper.sendPostMessageToIframe(new a.Message(s.EventType.SendCardinalErrors,n),e.locationData)},transactionId:e.orderNumber,tokenHeaderValue:e.tokenHeaderValue,setupCompleteCallback:function(t){l.WindowHelper.sendPostMessageToIframe(new a.Message(s.EventType.SendSetCardinalSessionId,t.sessionId),e.locationData)},successCallback:function(t){l.WindowHelper.sendPostMessageToIframe(new a.Message(s.EventType.SendCardinalApprove,t),e.locationData)},errorFloorLimit:e.errorFloorLimit,transactionTotal:e.transactionTotal,sessionKey:e.sessionKey,validatedCallback:function(t){l.WindowHelper.sendPostMessageToIframe(new a.Message(s.EventType.SendCardinalApprove,t),e.locationData)}})},e}();t.CardinalHelper=c},function(e,t,n){var o;window,o=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./ConsumerAuthentication/Processor.ts")}({"./Common/Utilities.ts":
/*!*****************************!*\
  !*** ./Common/Utilities.ts ***!
  \*****************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=window,i=function(){function e(){}return e.isNullOrUndefined=function(e){return null==e},e.isFunction=function(e){return"function"==typeof e},e.logToConsole=function(e){!this.isNullOrUndefined(o.console)&&o.console.log instanceof Function&&o.console.log(e)},e.assertParamDefined=function(e,t){if(this.isNullOrUndefined(e))throw t+" is required but it is "+typeof e},e.getUrlParameter=function(t,n){void 0===n&&(n=null),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=n;e.isNullOrUndefined(n)&&(o=window.location.search);var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(o);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},e}();t.Utilities=i},"./ConsumerAuthentication/Constants.ts":
/*!*********************************************!*\
  !*** ./ConsumerAuthentication/Constants.ts ***!
  \*********************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.responses={successfulAuthentication:"Y",failedAuthentication:"N",unavailableAuthentication:"U",successfulAttemptsTransaction:"A",challengeRequiredForAuthentication:"C",authenticationRejected:"R",challengeRequired:"D",informationalOnly:"I"},e.enrolledResponse={yes:"Y",no:"N",unavailable:"U",bypass:"B"},e.signatureVerificationCodes={yes:"Y",no:"N"},e.messages={cardinalResponseInvalid:"Invalid response returned from Processor.",transactionIsAGiftCard:"The transaction should not be a gift card.",authenticationFailed:"Authentication failed. Please try again.",maxFailureAttemptsExceeded:"The maximum failure number of attempts have been completed.",emittedBy:"3d secure",genericError:"Consumer Authentication Failed.",successfulErrorMessage:"Success"},e.eventNames={paymentsComplete:"payments.setupComplete",paymentsValidated:"payments.validated"},e.actionCodes={success:"SUCCESS",noAction:"NOACTION",failure:"FAILURE",error:"ERROR"},e}();t.Constants=o},"./ConsumerAuthentication/Processor.ts":
/*!*********************************************!*\
  !*** ./ConsumerAuthentication/Processor.ts ***!
  \*********************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(/*! yaku/lib/yaku.core */"./node_modules/yaku/lib/yaku.core.js"),i=n(/*! ../Common/Utilities */"./Common/Utilities.ts"),r=n(/*! ./Constants */"./ConsumerAuthentication/Constants.ts"),s=n(/*! ../Models/Error */"./Models/Error.ts"),a=function(){function e(){}return e.onValidate=function(e,t,n){var o=[];if(null===e||null===e.Payment||null===e.Payment.ExtendedData||e.Payment.ExtendedData.PAResStatus!==r.Constants.messages.authenticationFailed&&e.Payment.ExtendedData.SignatureVerification!==r.Constants.messages.authenticationFailed||o.push(new s.Error(r.Constants.messages.emittedBy,r.Constants.messages.genericError)),null===e||i.Utilities.isNullOrUndefined(e.CmpiLookup)||(e.CmpiLookup.PAResStatus===r.Constants.responses.failedAuthentication&&o.push(new s.Error(r.Constants.messages.emittedBy,r.Constants.messages.genericError)),e.CmpiLookup.ErrorDesc&&o.push(new s.Error(r.Constants.messages.emittedBy,r.Constants.messages.genericError))),null!==e&&null!==e.ErrorNumber&&e.ErrorNumber>0&&e.ErrorDescription&&e.ErrorDescription!==r.Constants.messages.successfulErrorMessage&&o.push(new s.Error(r.Constants.messages.emittedBy,e.ErrorDescription)),o.length>0)return(o=[]).push(new s.Error(r.Constants.messages.emittedBy,r.Constants.messages.genericError)),n(o),void this.totalFailedAttempts++;t()},e.initialize=function(e){this.validateParameters(e),this.params=e,this.params.cardinal.configure({timeout:8e3,maxRequestTries:1,logging:{level:"Off"},payment:{view:"model",framework:"cardinal",displayLoading:!0}}),this.params.cardinal.setup("init",{jwt:this.params.jwtToken}),this.addCardinalEvent(r.Constants.eventNames.paymentsComplete,this.params.setupCompleteCallback),this.addCardinalEvent(r.Constants.eventNames.paymentsValidated,this.params.validatedCallback)},e.addCardinalEvent=function(e,t){var n=window;i.Utilities.isNullOrUndefined(n)||i.Utilities.isNullOrUndefined(n.Cardinal)||!i.Utilities.isFunction(n.Cardinal.off)||(n.Cardinal.off(e),n.Cardinal.on(e,t))},e.triggerBinMap=function(e){i.Utilities.assertParamDefined(e,"cardNumber"),this.params.cardinal.trigger("bin.process",e)},e.invokeCardinal=function(t){var n=this,s=e;return t.checkoutTransactionId=s.params.transactionId,t.requestVerificationToken=s.params.tokenHeaderValue,new o((function(e,o){var a=t,u=a.CmpiLookup;i.Utilities.assertParamDefined(u,"cardinalResponse.cmpiLookup");var l=u.TransactionId,c=u.PAResStatus,d="",p="",f="",y="",g="",m="";i.Utilities.isNullOrUndefined(a.Address)||(d=a.Address.Street1||"",p=a.Address.Street2||"",f=a.Address.City||"",y=a.Address.StateCode||"",g=a.Address.PostalCode||"",m=a.Address.CountryCode||"");var h={Consumer:{Email1:"",Email2:"",BillingAddress:{FirstName:"",MiddleName:"",LastName:"",Address1:d,Address2:p,Address3:"",City:f,State:y,PostalCode:g,CountryCode:m,Phone1:"",Phone2:""}},Options:{EnableCCA:!0},OrderDetails:{OrderNumber:a.TransactionId,Amount:100*a.TransactionTotal,CurrencyCode:s.params.currencyCode,OrderDescription:"HPP Transaction: "+a.TransactionId,OrderChannel:"S",TransactionId:l}};switch(i.Utilities.assertParamDefined(c,"paresStatus"),n.dataToSubmit=a,c){case r.Constants.responses.challengeRequiredForAuthentication:s.params.cardinal.continue("cca",{AcsUrl:u.ACSUrl,Payload:u.Payload,TransactionId:u.TransactionId},h,s.params.jwtToken);break;case r.Constants.responses.successfulAuthentication:case r.Constants.responses.successfulAttemptsTransaction:s.dataToSubmit.cavv=a.CmpiLookup.Cavv,s.dataToSubmit.ecom3ds=u.EciFlag,s.submitToFreeway(s.dataToSubmit);break;case r.Constants.responses.failedAuthentication:case r.Constants.responses.authenticationRejected:s.params.errorCallback(r.Constants.messages.authenticationFailed);break;case r.Constants.responses.unavailableAuthentication:s.dataToSubmit.ecom3ds=u.EciFlag,s.submitToFreeway(s.dataToSubmit);break;case"":var v=u.Enrolled;v!==r.Constants.enrolledResponse.yes||void 0!==u.Cavv&&0!==u.Cavv.length?v===r.Constants.enrolledResponse.unavailable||v===r.Constants.enrolledResponse.bypass?(s.dataToSubmit.ecom3ds=u.EciFlag,s.submitToFreeway(s.dataToSubmit)):s.submitToFreeway(s.dataToSubmit):s.params.cardinal.continue("cca",{AcsUrl:u.ACSUrl,Payload:u.Payload,TransactionId:u.TransactionId},h,s.params.jwtToken)}e()}))},e.validateParameters=function(e){i.Utilities.assertParamDefined(e.cardinal,"cardinal"),i.Utilities.assertParamDefined(e.currencyCode,"currencyCode"),i.Utilities.assertParamDefined(e.transactionId,"transactionId")},e.submitToFreeway=function(e){this.params.successCallback(e)},e.totalFailedAttempts=0,e}();t.ConsumerAuthentication=a},"./Models/Error.ts":
/*!*************************!*\
  !*** ./Models/Error.ts ***!
  \*************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){this.emittedBy=e,this.message=t};t.Error=o},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./node_modules/yaku/lib/yaku.core.js":
/*!********************************************!*\
  !*** ./node_modules/yaku/lib/yaku.core.js ***!
  \********************************************/
/*! no static exports found */function(e,t,n){(function(t){!function(){"use strict";var n,o,i="object"==typeof self,r=i?self:t,s=r.Promise,a=r.process,u=Array,l={e:null},c=function(){},d=r.Symbol||{},p=i?function(e){s?new s((function(e){e()})).then(e):setTimeout(e)}:a.nextTick,f=function(e){var t;if(!g(this)||void 0!==this._s)throw w("Invalid this");if(this._s=2,e!==c){if(!m(e))throw w("Invalid argument");(t=C(e)(k(this,1),k(this,0)))===l&&A(this,0,t.e)}};function y(){return d.species||"Symbol(species)"}function g(e){return e&&"object"==typeof e}function m(e){return"function"==typeof e}function h(e,t,n){if(!t(e))throw w(n)}function v(){try{return n.apply(o,arguments)}catch(e){return l.e=e,l}}function C(e,t){return n=e,o=t,v}function P(e,t){var n=u(e),o=0;function i(){for(var i=0;i<o;)t(n[i],n[i+1]),n[i++]=void 0,n[i++]=void 0;o=0,n.length>e&&(n.length=e)}return function(e,t){n[o++]=e,n[o++]=t,2===o&&p(i)}}function b(e,t){var n,o,i,r,s=0;if(!e)throw w("Invalid argument");var a=e[d.iterator];if(m(a))o=a.call(e);else{if(!m(e.next)){if(e instanceof u){for(n=e.length;s<n;)t(e[s],s++);return s}throw w("Invalid argument")}o=e}for(;!(i=o.next()).done;)if((r=C(t)(i.value,s++))===l)throw m(o.return)&&o.return(),r.e;return s}function w(e){return new TypeError(e)}f.default=f,function(e,t){for(var n in t)e.prototype[n]=t[n]}(f,{then:function(e,t){if(void 0===this._s)throw w();return function(e,t,n,o){return m(n)&&(t._onFulfilled=n),m(o)&&(e._uh&&M("rejectionHandled",e),t._onRejected=o),e[e._pCount++]=t,2!==e._s&&T(e,t),t}(this,_((n=f,(o=this.constructor)&&o[y()]||n)),e,t);var n,o},catch:function(e){return this.then(void 0,e)},finally:function(e){return this.then((function(t){return f.resolve(e()).then((function(){return t}))}),(function(t){return f.resolve(e()).then((function(){throw t}))}))},_pCount:0,_pre:null,_Yaku:1}),f.resolve=function(e){return S(e)?e:B(_(this),e)},f.reject=function(e){return A(_(this),0,e)},f.race=function(e){var t=this,n=_(t),o=function(e){A(n,1,e)},i=function(e){A(n,0,e)},r=C(b)(e,(function(e){t.resolve(e).then(o,i)}));return r===l?t.reject(r.e):n},f.all=function(e){var t,n=this,o=_(n),i=[];function r(e){A(o,0,e)}return(t=C(b)(e,(function(e,s){n.resolve(e).then((function(e){i[s]=e,--t||A(o,1,i)}),r)})))===l?n.reject(t.e):(t||A(o,1,[]),o)},C((function(){Object.defineProperty(f,y(),{get:function(){return this}})}))(),f._Yaku=1;var T=P(999,(function(e,t){var n,o;void 0!==(o=e._s?t._onFulfilled:t._onRejected)?(n=C(H)(o,e._v))!==l?B(t,n):A(t,0,n.e):A(t,e._s,e._v)})),E=P(9,(function(e){(function e(t){if(t._umark)return!0;t._umark=!0;for(var n,o=0,i=t._pCount;o<i;)if((n=t[o++])._onRejected||e(n))return!0})(e)||(e._uh=1,M("unhandledRejection",e))}));function M(e,t){var n="on"+e.toLowerCase(),o=r[n];a&&a.listeners(e).length?"unhandledRejection"===e?a.emit(e,t._v,t):a.emit(e,t):o&&o({reason:t._v,promise:t})}function S(e){return e&&e._Yaku}function _(e){return S(e)?new e(c):(t=new e((function(e,i){if(t)throw w();n=e,o=i})),h(n,m),h(o,m),t);var t,n,o}function k(e,t){var n=!1;return function(o){n||(n=!0,1===t?B(e,o):A(e,t,o))}}function H(e,t){return e(t)}function A(e,t,n){var o=0,i=e._pCount;if(2===e._s)for(e._s=t,e._v=n,0===t&&E(e);o<i;)T(e,e[o++]);return e}function B(e,t){if(t===e&&t)return A(e,0,w("Chaining cycle detected for promise")),e;if(null!==t&&(m(t)||g(t))){var n=C(O)(t);if(n===l)return A(e,0,n.e),e;m(n)?S(t)?I(e,t,n):p((function(){I(e,t,n)})):A(e,1,t)}else A(e,1,t);return e}function O(e){return e.then}function I(e,t,n){var o=C(n,t)((function(n){t&&(t=null,B(e,n))}),(function(n){t&&(t=null,A(e,0,n))}));o===l&&t&&(A(e,0,o.e),t=null)}try{e.exports=f}catch(e){r.Yaku=f}}()}).call(this,n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))}})},e.exports=o()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(22);t.Cardinal=o.Cardinal;var i=n(17);t.ApplePay=i.ApplePay;var r=n(26);t.ConsumerAuth=r.ConsumerAuth;var s=n(27);t.PayByBank=s.PayByBank},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(0),r=n(3),s=n(1),a=function(){function e(){}return e.init=function(){i.WindowHelper.bindMessageEvent(window,(function(t){e.handleEvent(t)}))},e.isConfigured=function(){return!s.Utilities.isNullOrUndefined(this.initRequest)&&!s.Utilities.isNullOrUndefined(this.initRequest.cardinalCentinelJwt)},e.handleEvent=function(e){var t=e.data;t.type===o.EventType.SendSetupCardinalHelper&&(this.initRequest=t.data.initRequest)},e.invoke=function(){if(!this.isConfigured())return i.WindowHelper.logToConsole("Consumer authentication is not configured."),["Consumer authentication is not configured."];var e=new r.Message(o.EventType.InvokeConsumerAuth);return i.WindowHelper.sendPostMessageToIframe(e,this.initRequest.locationData),null},e}();t.ConsumerAuth=a,a.init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(2),r=n(28),s=n(30),a=n(31),u=n(1),l=n(4),c=n(33),d=function(){function e(){}return e.init=function(){o.WindowHelper.bindMessageEvent(window,(function(t){e.handleMessage(t)}))},e.handleMessage=function(e){switch(e.data.type){case i.EventType.SendSetupPayByBank:this.setupPayByBank(e);break;case i.EventType.SendPayByBankClick:r.PayByBankHelper.handleLaunchOpenBankingUi()}},e.finalize=function(){var e=u.Utilities.getCookie(l.Constants.payByBankCookieKey);e&&(this.extractCookieElements(e),this.getPaymentKey())},e.setupPayByBank=function(e){var t=e.data.data,n=t.sessionData,o=t.initRequest,i=o.sdkUrl;s.ScriptLoader.loadScript(i,(function(){return r.PayByBankHelper.init(n,o,new a.Environment)}))},e.getPaymentKey=function(){new c.PayByBankPaymentFormBuilder(new a.Environment,null).getPaymentKey(this.sessionKey,this.serviceOrigin)},e.extractCookieElements=function(e){var t=JSON.parse(atob(e));this.sessionKey=t.sessionKey,this.serviceOrigin=t.serviceOrigin},e}();t.PayByBank=d,d.init()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(29),i=n(7),r=n(1),s=n(4),a=n(11),u=n(5),l=function(){function e(){}return e.init=function(e,t,n){this.session=e,this.initRequest=t,this.environment=n,this.setUpPayByBank()},e.setUpPayByBank=function(){var e=this,t=window.top,n={merchantId:this.initRequest.merchantId,merchantName:this.initRequest.merchantName,amount:this.session.Order.amount.toString(),orderId:this.session.Order.id,transactionId:this.session.Transaction.id,sessionId:this.session.Session.Id},o=function(t){e.isConfigured="SUCCESS"===t.status};this.isConfigured||r.Utilities.poll({validate:function(){return!r.Utilities.isNullOrUndefined(t.OpenBanking)},interval:500,maxAttempts:10}).then((function(){t.OpenBanking.configure(n,o)})).catch((function(){a.MessageHelper.sendErrors([new u.Error(s.Constants.openBankingEmittedBy,"OpenBanking failed to load.",i.MessageCodes.openBankingConfigFailed)],e.environment)}))},e.handleLaunchOpenBankingUi=function(){var e=window.top;this.isConfigured&&(this.createCookie(),e.OpenBanking.launchUI())},e.createCookie=function(){var e=new o.SessionCookie(this.initRequest.sessionKey,this.initRequest.serviceBaseUrl),t=btoa(JSON.stringify(e));r.Utilities.setCookie(this.sessionCookieName,t,this.initRequest.sessionExpirationDate)},e.sessionCookieName="fp_paybybank_sessionid",e}();t.PayByBankHelper=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){this.sessionKey=e,this.serviceOrigin=t};t.SessionCookie=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(){function e(){}return e.loadScript=function(e,t){void 0===t&&(t=null);var n=document.createElement("script");n.type="text/javascript",n.src=e,o.Utilities.getBodyElement().appendChild(n),o.Utilities.isFunction(t)&&t()},e}();t.ScriptLoader=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=n(32),r=n(1),s=n(0),a=function(){function e(e){void 0===e&&(e=""),this.hostOrigin=s.WindowHelper.getHostOrigin(),r.Utilities.isNullOrUndefined(e)||(this._serviceLocation=e),this.setServicePaths()}return Object.defineProperty(e.prototype,"serviceBaseUrl",{get:function(){return this._serviceBaseUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serviceOrigin",{get:function(){return this._serviceOrigin},enumerable:!0,configurable:!0}),e.prototype.getEntropyServiceUrl=function(e){void 0===e&&(e=i.EntropyType.ChaCha20);var t={type:i.EntropyType[e]};return this.getServiceUrl(o.Endpoint.entropy+s.WindowHelper.getQueryString(t))},e.prototype.getServiceUrl=function(e,t){return encodeURI(this._serviceBaseUrl+(e||"")+(t||""))},e.prototype.setServicePaths=function(){if(!r.Utilities.isNullOrEmpty(this._serviceLocation)){var e=this._serviceLocation,t=/(https:\/\/)((hpc(\S+|\.)(qa|dev|uat)\.freedompay\.com)|(localhost\:\d+))/.exec(e);return this._serviceOrigin=null==t?"":t[0],void(this._serviceBaseUrl=this._serviceLocation)}var n=window.location,o=/(\/.+)?\/v[1-9.]+/.exec(n.pathname);this._serviceOrigin=n.origin,this._serviceBaseUrl=this._serviceOrigin+(null===o?"":o[0])},e}();t.Environment=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.ChaCha20=1]="ChaCha20"}(t.EntropyType||(t.EntropyType={}))},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),s=n(1),a=n(0),u=n(2),l=n(3),c=n(34),d=n(40),p=n(41),f=n(15),y=n(16),g=n(10),m=n(4),h=n(11),v=n(7),C=n(9),P=n(5),b=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.buttonElement=a.WindowHelper.getElementsByTagName("button")[0],o._payByBankFormBuilderHelper=new d.PayByBankFormBuilderHelper(t,n,o.toggleButton),o}return i(t,e),t.prototype.configureButton=function(){var t=this;return new r((function(n,o){if(!t.buttonElement)return t.sendInitError(),void o();t.buttonElement.addEventListener("click",t.handleButtonClick.bind(t)),a.WindowHelper.bindEvent(t.buttonElement,"click",(function(){t.isLegalValid()&&a.WindowHelper.sendPostMessageToTop(new l.Message(u.EventType.SendPayByBankClick,window.location.href),t.environment)})),e.prototype.sendFrameHeight.call(t),n()}))},t.prototype.configureControls=function(){var t=this;return new r((function(n,o){e.prototype.configureControls.call(t),n()}))},t.prototype.configureFunctions=function(){return new r((function(e,t){e()}))},t.prototype.initialize=function(){var t=this;return new r((function(n,o){t._payByBankFormBuilderHelper.init().then((function(o){e.prototype.initialize.call(t).then((function(){var e=t.initPayByBank(t.environment,o);a.WindowHelper.sendPostMessageToTop(new l.Message(u.EventType.SendSetupPayByBank,e),t.environment),n()}))}))}))},t.prototype.getPaymentKey=function(e,t){var n=this,o=this.getAcquirePaymentKeyUrl(t),i=new f.Card(null,null,y.PaymentType.PayByBank,null);this.sendPost(o,i,e).then((function(e){var t=n.getKeyData(e);s.Utilities.deleteCookie(m.Constants.payByBankCookieKey);var o=new l.Message(u.EventType.ReceivePaymentKey,t);a.WindowHelper.sendPostMessage(o)})).catch((function(e){try{if(400===e.status){var t=[];if(e.errors&&"string"!=typeof e.errors)JSON.parse(e.errors);else t.push(new P.Error("RequestPaymentKey",e.errors||h.MessageHelper.getMessageTranslation(v.MessageCodes.unknownError,"An unknown error occurred. Please try again."),v.MessageCodes.unknownError));t.length&&n.sendErrors(t)}else 401===e.status?n.sendErrors([new P.Error("RequestPaymentKey",h.MessageHelper.getMessageTranslation(v.MessageCodes.resourceUnauthorized,"404 - Not Found: The resource you are looking for has been removed, had its name changed, or is temporarily unavailable."),v.MessageCodes.resourceUnauthorized)]):404===e.status?n.sendErrors([new P.Error("RequestPaymentKey",h.MessageHelper.getMessageTranslation(v.MessageCodes.resourceNotFound,"404 - Not Found: The resource you are looking for has been removed, had its name changed, or is temporarily unavailable."),v.MessageCodes.resourceNotFound)]):n.sendErrors([new P.Error("RequestPaymentKey",h.MessageHelper.getMessageTranslation(v.MessageCodes.unknownError,"An unknown error occurred. Please try again."),v.MessageCodes.unknownError)])}catch(e){n.sendErrors([new P.Error("RequestPaymentKey",h.MessageHelper.getMessageTranslation(v.MessageCodes.unknownError,"An unknown error occurred. Please try again."),v.MessageCodes.unknownError)])}}))},t.prototype.handleButtonClick=function(e){e.preventDefault(),s.Utilities.hasDisabledClass(e.target)},t.prototype.initPayByBank=function(e,t){return{environment:e,initRequest:new p.PayByBankInitRequest(this.settings.MerchantId,this.settings.MerchantName,this.settings.PayByBankSdkUrl,this.settings.sessionKey,this.settings.PayByBankSessionExpirationDate,this.environment.serviceBaseUrl),sessionData:t}},t.prototype.sendPost=function(e,t,n){var o={};return o.Authorization="Bearer "+n,new r((function(n,i){g.HttpClient.post(e,t,o).then((function(e){n(JSON.parse(e.response))})).catch((function(e){i(e)}))}))},t.prototype.getAcquirePaymentKeyUrl=function(e){return e+"/"+C.Endpoint.paymentKey},t.prototype.getKeyData=function(e){return{attributes:e.Attributes,paymentKeys:e.PaymentKeys,paymentType:e.PaymentType}},t.prototype.sendErrors=function(e){h.MessageHelper.sendErrors(e,null)},t}(c.PaymentFormBuilderBase);t.PayByBankPaymentFormBuilder=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(4),r=n(35),s=n(36),a=n(9),u=n(5),l=n(2),c=n(10),d=n(3),p=n(7),f=n(11),y=n(1),g=n(37),m=n(38),h=n(39),v=n(0),C=function(){function e(e,t){this.controls=[],this.environment=e,this.settings=t}return e.prototype.configureControls=function(){var e=this;return new o((function(t){e.addLegalControl(),t()}))},e.prototype.displayControls=function(){this.displayBodyElement(),this.sendFrameHeight()},e.prototype.getFrameHeight=function(){var e=v.WindowHelper.getDocument().body,t=window.getComputedStyle(e),n=t.getPropertyValue("margin-bottom"),o=t.getPropertyValue("margin-top"),i=e.offsetHeight+(null!==n?parseInt(n):0)+(null!==o?parseInt(o):0);return v.WindowHelper.logDebugMessageToConsole("getFrameHeight: "+i),i},e.prototype.initialize=function(){var e=this;return new o((function(t,n){if(e.bodyElement=v.WindowHelper.getDocument().body,!e.bodyElement)return f.MessageHelper.sendInitError(e.environment),void n();e.getIsBrowserValid()?t():n()}))},e.prototype.toggleDisabled=function(e){this.toggleDisabledFunction&&this.toggleDisabledFunction(e)},e.prototype.displayBodyElement=function(){this.bodyElement.style.display="block"},e.prototype.getControl=function(e){return this.controls.filter((function(t){return t.controlType===e}))[0]},e.prototype.getControlElement=function(e){var t=this.getControl(e);return t?v.WindowHelper.getElementById(t.elementId):null},e.prototype.getIsValid=function(e){return e.type===h.ValidationType.Unknown||e.type===h.ValidationType.NotApplicable||!1!==e.isValid},e.prototype.getPaymentKeyServiceUrl=function(){return this.environment.getServiceUrl(a.Endpoint.paymentKey)},e.prototype.handleValidation=function(e,t){if(e&&t.type!==h.ValidationType.Unknown&&t.type!==h.ValidationType.NotApplicable){var n=e.parentElement.parentElement,o=n.querySelector(".validation-message"),i=n.className.replace(" invalid","").replace(" valid","");!1===t.isValid?i+=" invalid":t.isValid&&(i+=" valid"),n.className=i,o.innerHTML=!1===t.isValid?t.message:"",e.dispatchEvent(new CustomEvent("validityChange",{detail:new m.ValidationResult(t.emittedBy,t.isValid,t.message,t.type)}))}},e.prototype.handleValidityChange=function(e){this.sendValidityChange(e.detail)},e.prototype.hasLegalControl=function(){var e=this.getControl(s.ControlType.Legal);return null!=e},e.prototype.isLegalValid=function(){if(!this.hasLegalControl())return!0;var e=this.getControlElement(s.ControlType.Legal),t=this.getIsLegalValid(e);return this.handleValidation(e,t),t.isValid},e.prototype.requestPaymentKey=function(e,t){var n=this;if(void 0===t&&(t=null),this.isLegalValid()&&this.requestPaymentKeyValidationFunction(e)){var o=function(){y.Utilities.isFunction(t)&&t()};this.requestPaymentKeyPayloadFunction(e).then((function(e){e&&(n.toggleDisabledFunction(!0),c.HttpClient.post(n.getPaymentKeyServiceUrl(),e).then((function(e){n.sendPaymentKeyResponse(JSON.parse(e.response)),o()})).catch((function(e){o();try{if(400===e.status){var t=[];if(e.errors&&"string"!=typeof e.errors){var i=JSON.parse(e.errors);t=n.requestPaymentKeyHandleErrorFunction(i)}else t.push(new u.Error("RequestPaymentKey",e.errors||f.MessageHelper.getMessageTranslation(p.MessageCodes.unknownError,"An unknown error occurred. Please try again."),p.MessageCodes.unknownError));t.length&&n.sendErrors(t)}else 401===e.status?n.sendErrors([new u.Error("RequestPaymentKey",f.MessageHelper.getMessageTranslation(p.MessageCodes.resourceUnauthorized,"404 - Not Found: The resource you are looking for has been removed, had its name changed, or is temporarily unavailable."),p.MessageCodes.resourceUnauthorized)]):404===e.status?n.sendErrors([new u.Error("RequestPaymentKey",f.MessageHelper.getMessageTranslation(p.MessageCodes.resourceNotFound,"404 - Not Found: The resource you are looking for has been removed, had its name changed, or is temporarily unavailable."),p.MessageCodes.resourceNotFound)]):n.sendErrors([new u.Error("RequestPaymentKey",f.MessageHelper.getMessageTranslation(p.MessageCodes.unknownError,"An unknown error occurred. Please try again."),p.MessageCodes.unknownError)])}catch(e){n.sendErrors([new u.Error("RequestPaymentKey",f.MessageHelper.getMessageTranslation(p.MessageCodes.unknownError,"An unknown error occurred. Please try again."),p.MessageCodes.unknownError)])}})).finally((function(){n.toggleDisabledFunction(!1)})))}))}else this.toggleDisabledFunction(!1)},e.prototype.sendErrors=function(e){f.MessageHelper.sendErrors(e,this.environment)},e.prototype.sendFrameHeight=function(e){e||(e=this.getFrameHeight()),f.MessageHelper.sendFrameHeight(e,this.environment)},e.prototype.sendHostMessage=function(e){v.WindowHelper.sendHostMessage(e,this.environment)},e.prototype.sendInitError=function(){f.MessageHelper.sendInitError(this.environment)},e.prototype.sendPaymentKeyResponse=function(e){var t=this.getPaymentKeyData(e),n=new d.Message(l.EventType.ReceivePaymentKey,t);this.sendHostMessage(n)},e.prototype.sendValidityChange=function(e){var t=new d.Message(l.EventType.ReceiveValidityChange,e);this.sendHostMessage(t),this.sendFrameHeight()},e.prototype.toggleButton=function(e,t){t?e.classList.add(i.Constants.disabledClassName):e.classList.remove(i.Constants.disabledClassName)},e.prototype.addLegalAnchorEvents=function(){var e=v.WindowHelper.getElementsByClass("legal")[0];if(e)for(var t=e.querySelectorAll("span.anchor"),n=t.length-1,o=0;o<=n;o++){t[o].addEventListener("click",this.handleLegalClick.bind(this))}},e.prototype.addLegalControl=function(){this.addLegalAnchorEvents();var e=s.ControlType.Legal,t=s.ControlType[e],n=v.WindowHelper.getElementById(t);n&&(n.addEventListener("validityChange",this.handleValidityChange.bind(this)),n.addEventListener("change",this.handleLegalOnChange.bind(this)),this.controls.push(new r.Control(e,t,h.ValidationType.Required)))},e.prototype.getIsBrowserValid=function(){var e=v.WindowHelper.createElement("div");if("borderImage"in e.style)return!0;var t=v.WindowHelper.createElement("h1"),n=v.WindowHelper.createElement("p");for(t.innerText="Your browser is out of date!",n.innerText="Please update your browser to view this page correctly.",e.setAttribute("class","outdated-browser"),e.appendChild(t),e.appendChild(n);this.bodyElement.firstChild;)this.bodyElement.removeChild(this.bodyElement.firstChild);return this.bodyElement.appendChild(e),this.displayBodyElement(),this.sendFrameHeight(),!1},e.prototype.getIsLegalValid=function(e){var t=new g.ValidationResult(s.ControlType[s.ControlType.Legal],h.ValidationType.Required);return t.isValid=e.checked,e.checked||(t.message=f.MessageHelper.getMessageTranslation(p.MessageCodes.requiredLegal,"Please accept legal terms to proceed.")),t},e.prototype.getPaymentKeyData=function(e){return{attributes:e.Attributes,paymentKeys:e.PaymentKeys,paymentType:e.PaymentType}},e.prototype.handleLegalClick=function(e){e.preventDefault();var t={id:e.target.id},n=new d.Message(l.EventType.ReceiveLegalClick,t);this.sendHostMessage(n)},e.prototype.handleLegalOnChange=function(e){var t=e.target,n=this.getIsLegalValid(t);this.handleValidation(t,n),this.toggleDisabledButtonFunction(!t.checked)},e}();t.PaymentFormBuilderBase=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,n){this._controlType=e,this._elementId=t,this._validationType=n}return Object.defineProperty(e.prototype,"controlType",{get:function(){return this._controlType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elementId",{get:function(){return this._elementId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validationType",{get:function(){return this._validationType},enumerable:!0,configurable:!0}),e}();t.Control=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.CardNumber=1]="CardNumber",e[e.ExpirationDate=2]="ExpirationDate",e[e.SecurityCode=3]="SecurityCode",e[e.PostalCode=4]="PostalCode",e[e.SecurityCodeNotAvailable=5]="SecurityCodeNotAvailable",e[e.Legal=6]="Legal"}(t.ControlType||(t.ControlType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this._emittedBy=e,this._type=t}return Object.defineProperty(e.prototype,"emittedBy",{get:function(){return this._emittedBy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isValid",{get:function(){return this._isValid},set:function(e){this._isValid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e},enumerable:!0,configurable:!0}),e}();t.ValidationResult=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n,o){this.emittedBy=e,this.isValid=t,this.message=n,this.type=o};t.ValidationResult=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.NotApplicable=1]="NotApplicable",e[e.Optional=2]="Optional",e[e.Required=3]="Required",e[e.OptionalExplicit=4]="OptionalExplicit"}(t.ValidationType||(t.ValidationType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(9),r=n(10),s=n(0),a=function(){function e(e,t,n){this._payByBankButton="pay-by-bank-button",this._environment=e,this._settings=t,this._toggleButtonFunction=n}return e.prototype.init=function(){var e=this;return new o((function(t){var n=s.WindowHelper.getElementById(e._payByBankButton);e._toggleButtonFunction(n,!0),r.HttpClient.post(e.getPayByBankCreateSessionUrl(),null).then((function(o){e._createSessionResponse=JSON.parse(o.response),e._toggleButtonFunction(n,!1),t(e._createSessionResponse)}))}))},e.prototype.getPayByBankCreateSessionUrl=function(){return this._environment.getServiceUrl(i.Endpoint.apmCreateOrderPayByBank)},e}();t.PayByBankFormBuilderHelper=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n,o,i,r){this.merchantId=e,this.merchantName=t,this.sdkUrl=n,this.sessionKey=o,this.sessionExpirationDate=i,this.serviceBaseUrl=r};t.PayByBankInitRequest=o}])}));